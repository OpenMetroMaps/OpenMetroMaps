<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<omm-stations version="1.0.0">
  <change line="U9" towards="Rathaus Steglitz" at="Bundesplatz" change-line-regex="S.*" location="almost front"/>
  <change line="U9" towards="Osloer Straße" at="Bundesplatz" change-line-regex="S.*" location="almost back"/>

  <change line="U9" towards="Rathaus Steglitz" at="Berliner Straße" change-line="U7" location="middle/middle front"/>
  <change line="U9" towards="Rathaus Steglitz" at="Berliner Straße" change-line="U7" location="middle/middle back"/>
  <change line="U9" towards="Osloer Straße" at="Berliner Straße" change-line="U7" location="middle/middle front"/>
  <change line="U9" towards="Osloer Straße" at="Berliner Straße" change-line="U7" location="middle/middle back"/>

  <change line="U3" towards="Nollendorfplatz" at="Heidelberger Platz" change-line-regex="S.*" location="back"/>
  <change line="U3" towards="Krumme Lanke"    at="Heidelberger Platz" change-line-regex="S.*" location="front"/>
  <change line="U3" towards="Nollendorfplatz" at="Fehrbelliner Platz" change-line="U7" location="back"/>
  <change line="U3" towards="Krumme Lanke"    at="Fehrbelliner Platz" change-line="U7" location="front"/>

  <batch line="U7" towards="Rathaus Spandau">
    <change at="Neukölln" change-line-regex="S.*" location="front"/>
    <exit   at="Neukölln" name="north" location="front" description="Emser Straße, Saalestraße" derive-reverse="true"/>
    <exit   at="Neukölln" name="south" location="back" description="Lahnstraße, Silbersteinstraße" derive-reverse="true"/>
    <change at="Hermannplatz" change-line="U8" location="middle/middle back"/>
    <exit   at="Möckernbrücke" to="Wikimedia" location="middle" description="Lahnstraße, Silbersteinstraße" derive-reverse="true"/>
    <change at="Berliner Straße" change-line="U9" location="middle"/>
    <change at="Fehrbelliner Platz" change-line="U3" location="almost back"/>
  </batch>
  <batch line="U7" towards="Rudow">
    <change at="Neukölln" change-line-regex="S.*" location="back"/>
    <change at="Hermannplatz" change-line="U8" location="middle/middle front"/>
    <change at="Berliner Straße" change-line="U9" location="middle"/>
    <change at="Fehrbelliner Platz" change-line="U3" location="almost front"/>
  </batch>

  <batch line="U2" towards="Ruhleben">
    <change at="Stadtmitte" change-line="U6" location="front" derive-reverse-from="true"/>
    <exit   at="Eberswalder Straße" name="north" location="back" description="Cantianstraße" derive-reverse="true"/>
    <exit   at="Eberswalder Straße" name="south" location="front" description="Eberswalder Straße, Danziger Straße, Sparkasse, Kulturbrauerei" derive-reverse="true"/>
  </batch>
  <batch line="U2" towards="Pankow">
    <!-- nothing here yet -->
  </batch>

  <change line="U6" towards="Alt-Tegel"      at="Tempelhof" change-line-regex="S.*" location="front"/>
  <change line="U6" towards="Alt Mariendorf" at="Tempelhof" change-line-regex="S.*" location="back"/>

  <batch line="U8" towards="Hermannstraße">
    <change at="Hermannplatz" change-line="U7" location="middle/middle front" derive-reverse-from="true"/>
    <change at="Hermannstraße" change-line-regex="S.*" location="back"/>
    <exit   at="Hermannstraße" name="north" location="back" description="Siegfriedstraße, Emser Straße"/>
    <exit   at="Hermannstraße" name="south" location="front" description="Silbersteinstraße"/>
  </batch>

  <batch line="S41" towards="Wedding" reverse-line="S42" reverse-towards="Schönhauser Allee">
    <exit   at="Prenzlauer Allee" name="only-exit" location="front" description="Prenzlauer Allee" derive-reverse="true"/>
    <change at="Neukölln" change-line="U7" location="front" derive-reverse-from="true"/>
    <exit   at="Neukölln" name="west" location="front" description="Karl-Marx-Straße, Emser Straße" derive-reverse="true"/>
    <exit   at="Neukölln" name="east" location="back" description="Saalestraße" derive-reverse="true"/>
    <change at="Hermannstraße" change-line="U8" location="middle" derive-reverse-from="true"/>
    <exit   at="Hermannstraße" name="west" location="front" description="Escalator" derive-reverse="true"/>
    <exit   at="Hermannstraße" name="east" location="back" description="Hermann-Quartier, Elevator" derive-reverse="true"/>
    <change at="Tempelhof" change-line="U6" location="almost back" derive-reverse-from="true"/>
    <exit   at="Südkreuz" name="Schöneberg" location="front" description="Reisezentrum, Edeka, Burger King, BSR" derive-reverse="true"/>
    <exit   at="Südkreuz" name="Tempelhof" location="back" description="dm, McDonald's, IKEA" derive-reverse="true"/>
    <change at="Innsbrucker Platz" change-line="U4" location="back" derive-reverse-from="true"/>
    <exit   at="Innsbrucker Platz" name="only-exit" location="back" description="Hauptstraße, Innsbrucker Platz" derive-reverse="true"/>
    <change at="Bundesplatz" change-line="U9" change-towards="Rathaus Steglitz" location="front" derive-reverse-from="true"/>
    <change at="Bundesplatz" change-line="U9" change-towards="Osloer Straße" location="middle" derive-reverse-from="true"/>
    <change at="Bundesplatz" change-line="U9" change-towards="Osloer Straße" location="back" derive-reverse-from="true"/>
    <change at="Heidelberger Platz" change-line="U3" location="back" derive-reverse-from="true"/>
  </batch>
</omm-stations>
